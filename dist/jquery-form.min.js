function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,f=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){f=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(f)throw a}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}(V=>{V.fn.jqueryForm=function(e){var t=V.extend({beforeSend:null,onSuccess:null,onError:null,onComplete:null,validateBeforeSubmit:!0,method:null,action:null,extraData:{},resetOnSuccess:!1,processData:!1,contentType:!1},e=e||{});return this.each(function(){var B=V(this),U="";B.is("form")?(B.find(".jqf-alerts-container .alert").hide(),B.data("jqf-settings",t),B.off("submit.jqueryForm").on("submit.jqueryForm",function(e){e.preventDefault();var N=B.data("jqf-settings");if(!N.validateBeforeSubmit||(e=>{var t=!0;return t=e[0].checkValidity&&!e[0].checkValidity()?!1:t})(B)){if("function"==typeof N.beforeSend)if(!1===N.beforeSend.call(B,B))return!1;var t=new FormData(B[0]);if(N.extraData)for(var n in N.extraData)t.append(n,N.extraData[n]);e={url:N.action||B.attr("action"),method:N.method||B.attr("method")||"GET",data:t,processData:N.processData,contentType:N.contentType,beforeSend:function(){B.find(".jqf-alerts-container .alert").hide(),B.find(".jqf-html-response-container").empty(),B.find(".jqf-html-response-container").hide(),B.find(".jqf-alerts-container .alert-info").show("fast"),B.find(".jqf-alerts-container .alert button").show(),U=B.find("input, select, textarea").first().attr("name")},success:function(e,t,n){if(!1===n.getResponseHeader("Content-Type").includes("application/json"))B.find(".jqf-html-response-container").html(e).show("fast"),"function"==typeof N.onSuccess&&N.onSuccess.call(B,e);else try{var r,a,o,i,s=n.status,l="",f="",c="",u=[];if(e.meta&&e.meta.response&&(l=null!=(r=e.meta.response.title)?r:"Success!",f=null!=(a=e.meta.response.message)?a:"Form submitted successfully",c=null!=(o=e.meta.response.redirect)?o:""),e.data&&e.data.attributes&&(u=null!=(i=e.data.attributes)?i:[]),B.find(".jqf-alerts-container .alert-success h4").text(l),B.find(".jqf-alerts-container .alert-success p").text(f),""===l&&""===f||B.find(".jqf-alerts-container .alert-success").show("fast"),"function"==typeof N.onSuccess&&N.onSuccess.call(B,e),200<=s&&s<300){N.resetOnSuccess&&B[0].reset();for(var d=0,m=Object.entries(u);d<m.length;d++){var p=_slicedToArray(m[d],2),h=p[0],y=p[1],j=B.find('.jqf-form-container *[name="'+h+'"]');0<j.length&&j.val(y)}}else 300<=s&&s<400&&""!==c&&(B.find(".jqf-alerts-container .alert button").hide(),setTimeout(function(){window.location.href=c},1e3))}catch(e){B.find(".jqf-alerts-container .alert-danger h4").text("Error parsing JSON response"),B.find(".jqf-alerts-container .alert-danger p").text(e),B.find(".jqf-alerts-container .alert-danger").show("fast"),console.error(e)}},error:function(e,t,n){var r,a,o;if(!1===e.getResponseHeader("Content-Type").includes("application/json"))a=(r=e.responseText).indexOf("<body>"),o=r.indexOf("</body>"),-1!==a&&-1!==o&&(r=r.substring(a,o+7)),B.find(".jqf-html-response-container").html(r).show("fast");else try{var i,s,l,f,c,u,d,m,p=e.responseJSON,h=e.status,y=null!=(i=p.meta.response.title)?i:"Success!",j=null!=(s=p.meta.response.message)?s:"Form submitted successfully",q=null!=(l=p.meta.response.redirect)?l:"",b=null!=(f=p.meta.response.errors)?f:[],v=null!=(c=p.meta.response.type)?c:"",g=null!=(u=p.meta.response.file)?u:"",x=null!=(d=p.meta.response.line)?d:"",S=null!=(m=p.meta.response.stack_trace)?m:[],T=(""!==v&&""!==g&&""!==x&&(j=v+" in "+g+" at line "+x),".jqf-alerts-container .alert-warning");if(500<=h&&(T=".jqf-alerts-container .alert-danger"),B.find(T+" ul").empty(),B.find(T+" ul").hide(),B.find(T+" h4").text(y),B.find(T+" p").text(j),B.find(T).show("fast"),0<b.length||0<S.length){for(var w=0;w<b.length;w++){var A,_=b[w];""===U&&_.field&&(U=_.field),_.message&&((A=V("<li></li>")).text(_.message),B.find(T+" ul").append(A))}for(var O=B.find(T+" ul"),D=0;D<S.length;D++){for(var R=S[D],F=V("<li></li>"),k=V("<ul></ul>"),C=0,E=Object.entries(R);C<E.length;C++){var I=_slicedToArray(E[C],2),H=I[0],J=I[1],L=V("<li></li>");L.text(H+": "+J),k.append(L)}F.append("<p>Stack trace: "+D+"</p>"),F.append(k),O.append(F)}O.show()}400<=h&&h<600&&U&&(B.find('.jqf-form-container input[name="'+U+'"]').addClass("is-invalid"),B.find('.jqf-form-container textarea[name="'+U+'"]').addClass("is-invalid"),B.find('.jqf-form-container select[name="'+U+'"]').addClass("is-invalid")),"function"==typeof N.onError&&N.onError.call(B,e,t,n),300<=h&&h<400&&""!==q&&(B.find(".jqf-alerts-container .alert button").hide(),setTimeout(function(){window.location.href=q},1e3))}catch(e){B.find(".jqf-alerts-container jqf-html-response-container").text("Error parsing JSON response"),B.find(".jqf-alerts-container .alert-danger p").text(e),B.find(".jqf-alerts-container .alert-danger").show("fast"),console.error(e)}},complete:function(){B.find(".jqf-alerts-container .alert-info").hide(),"function"==typeof N.onComplete&&N.onComplete.call(B),V("html, body").animate({scrollTop:B.find(".jqf-alerts-container").offset().top-100},250)}};V.ajax(e)}return!1}),B.on("click",".jqf-action-retry",function(e){e.preventDefault(),B.find(".jqf-alerts-container .alert").hide("fast"),B.find(".jqf-html-response-container").empty(),""!==U&&(B.find('.jqf-form-container input[name="'+U+'"]').focus(),B.find('.jqf-form-container textarea[name="'+U+'"]').focus(),B.find('.jqf-form-container select[name="'+U+'"]').focus())}),B.on("click",".jqf-action-reset",function(e){e.preventDefault(),B[0].reset(),B.find(".jqf-alerts-container .alert").hide("fast"),B.find(".jqf-html-response-container").empty(),""!==U&&(B.find('.jqf-form-container input[name="'+U+'"]').focus(),B.find('.jqf-form-container textarea[name="'+U+'"]').focus(),B.find('.jqf-form-container select[name="'+U+'"]').focus())})):console.warn("jqueryForm: Element is not a form",B)})},V.fn.jqueryFormUpdate=function(n){return this.each(function(){var e=V(this),t=e.data("jqueryForm-settings")||{},t=V.extend({},t,n);e.data("jqf-settings",t)})},V.fn.jqueryFormReset=function(){return this.each(function(){var e=V(this);e[0].reset(),e.find("input, select, textarea").first().focus()})}})(jQuery);